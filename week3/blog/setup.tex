% =========================================================
%  setup.tex — cấu hình XeLaTeX + listings (ASCII an toàn)
% =========================================================

% ---------- gói cơ bản ----------
\usepackage{amsmath, amssymb, graphicx, float}
\usepackage{xcolor}
\usepackage{tabularx}
\usepackage{enumitem}
\usepackage[hidelinks]{hyperref}
\usepackage{setspace}
\usepackage{microtype}
\onehalfspacing

% Cải thiện line-breaking tiếng Việt
\tolerance=1000
\emergencystretch=3em

% ---------- màu cho code ----------
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}

% ---------- listings ----------
\usepackage{listings}              % KHÔNG dùng listingsutf8

\lstset{
  language=SQL,
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\color{magenta},
  commentstyle=\color{codegreen},
  stringstyle=\color{codepurple},
  backgroundcolor=\color{backcolour},
  numbers=left,
  numberstyle=\tiny\color{codegray},
  frame=single,
  breaklines=true,
  inputencoding=utf8,      % đủ để đọc file .tex UTF-8
  columns=fullflexible,    % tránh mất khoảng trắng
  upquote=true,            % in đúng dấu '
  captionpos=b,
  showspaces=false,
  showstringspaces=false,
  tabsize=2
}

% ---------- Việt hoá nhãn ----------
\renewcommand{\lstlistingname}{Truy vấn}
\renewcommand{\lstlistlistingname}{Danh sách mã}